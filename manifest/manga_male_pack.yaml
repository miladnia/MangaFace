pack_name: manga_male_pack
initializer_script: initializer_script


navigators:
  # Head
  - cover_url: <BASE_URL>/manga_male_pack/navigator_covers/head.svg
    options:
      - title: Shape
        command_name: draw_head_shape
      - title: Ears
        command_name: draw_ears
      - title: Eyebrows
        command_name: draw_eyebrows
      - title: Eyes
        command_name: draw_eyes
      - title: Nose
        command_name: draw_nose
      - title: Mouth
        command_name: draw_mouth
      - title: Mustache
        command_name: draw_mustache
      - title: Beard
        command_name: draw_beard
  # Hair
  - cover_url: <BASE_URL>/manga_male_pack/navigator_covers/hairstyles.svg
    options:
      - title: Hair
        command_name: draw_hair
  # Wearables
  - cover_url: <BASE_URL>/manga_male_pack/navigator_covers/wearables.svg
    options:
      - title: Shirt
        command_name: draw_shirt
      - title: Jacket
        command_name: draw_jacket
      - title: Scarf
        command_name: draw_scarf
      - title: Hat
        command_name: draw_hat
      - title: Glasses
        command_name: draw_glasses
  # Backgrounds
  - cover_url: <BASE_URL>/manga_male_pack/navigator_covers/backgrounds.svg
    options:
      - title: Colors
        command_name: draw_filled_background
      - title: Patterns
        command_name: draw_patterns
      - title: Themes
        command_name: draw_themes
  # Effects
  - cover_url: <BASE_URL>/manga_male_pack/navigator_covers/effects.svg
    options:
      - title: Weather
        command_name: draw_weather_effect


layers:
  # Body shape
  body_shape_layer:
    max_asset_index: 1
    color_source: head_shape_layer
    asset_url: <BASE_URL>/manga_male_pack/assets/body_shape/{color_name}/{asset_index}.png
    position:
      top: 134
      left: 26

  # Head shape
  head_shape_layer:
    max_asset_index: 30
    color_palette_name: skin_color_palette
    asset_url: <BASE_URL>/manga_male_pack/assets/head_shape/{color_name}/{asset_index}.png
    position:
      top: 0
      left: 30

  # Hair style layers
  hair_front_layer:
    max_asset_index: 62
    color_palette_name: hair_color_palette
    asset_url: <BASE_URL>/manga_male_pack/assets/hair_front/{color_name}/{asset_index}.png
    _assets:
      - &ear_covering_hair [33, 37, 38, 39, 41, 43, 44, 60, 62]
      - &shaved_sides_hairs [1, 2, 3, 9, 28]
      # - &horseshoe_hair 19
      - &compact_hair 35
      - &bald_on_top__hair_on_sides 22
  hair_back_layer:
    max_asset_index: 62
    color_palette_name: hair_color_palette
    asset_url: <BASE_URL>/manga_male_pack/assets/hair_back/{color_name}/{asset_index}.png
    _assets:
      - &standalone_pretty_back_hairs [31, 33, 35, 36]
      # - &front_dependent_back_hairs [32]
    position:
      top: 23
      left: 0

  # Hat
  hat_layer:
    max_asset_index: 11
    color_palette_name: cloth_color_palette
    asset_url: <BASE_URL>/manga_male_pack/assets/hat/{color_name}/{asset_index}.png
    _assets:
      - &full_coverage_hats [4, 6] # swim caps or head covers
      - &head_sized_hats [1, 8]
      - &all_non_regular_hats [1, 2, 4, 6, 8]
    position:
      top: -20
      left: 0

  # Eyes layers
  left_eye_layer:
    max_asset_index: 28
    color_palette_name: eye_color_palette
    asset_url: <BASE_URL>/manga_male_pack/assets/left_eye/{color_name}/{asset_index}.png
    position:
      top: 68
      left: 97
  right_eye_layer:
    max_asset_index: 28
    color_palette_name: eye_color_palette
    asset_url: <BASE_URL>/manga_male_pack/assets/right_eye/{color_name}/{asset_index}.png
    position:
      top: 68
      left: 41

  # Eyebrow layers
  left_eyebrow_layer:
    max_asset_index: 27
    color_palette_name: hair_color_palette
    asset_url: <BASE_URL>/manga_male_pack/assets/left_eyebrow/{color_name}/{asset_index}.png
    position:
      top: 52
      left: 93
  right_eyebrow_layer:
    max_asset_index: 27
    color_palette_name: hair_color_palette
    asset_url: <BASE_URL>/manga_male_pack/assets/right_eyebrow/{color_name}/{asset_index}.png
    position:
      top: 52
      left: 39
  left_eyeshadow_layer:
    max_asset_index: 27
    color_source: head_shape_layer
    asset_url: <BASE_URL>/manga_male_pack/assets/left_eyeshadow/{color_name}/{asset_index}.png
    position:
      top: 55
      left: 91
  right_eyeshadow_layer:
    max_asset_index: 27
    color_source: head_shape_layer
    asset_url: <BASE_URL>/manga_male_pack/assets/right_eyeshadow/{color_name}/{asset_index}.png
    position:
      top: 55
      left: 38

  # Ears layers
  right_ear_layer:
    max_asset_index: 6
    color_source: head_shape_layer
    asset_url: <BASE_URL>/manga_male_pack/assets/right_ear/{color_name}/{asset_index}.png
    position:
      top: 64
      left: 12
  left_ear_layer:
    max_asset_index: 6
    color_source: head_shape_layer
    asset_url: <BASE_URL>/manga_male_pack/assets/left_ear/{color_name}/{asset_index}.png
    position:
      top: 64
      left: 137

  # Other face layers
  mouth_layer:
    max_asset_index: 23
    color_source: head_shape_layer
    asset_url: <BASE_URL>/manga_male_pack/assets/mouth/{color_name}/{asset_index}.png
    position:
      top: 107
      left: 52
  nose_layer:
    max_asset_index: 34
    color_source: head_shape_layer
    asset_url: <BASE_URL>/manga_male_pack/assets/nose/{color_name}/{asset_index}.png
    position:
      top: 68
      left: 65
  mustache_layer:
    max_asset_index: 29
    color_palette_name: hair_color_palette
    asset_url: <BASE_URL>/manga_male_pack/assets/mustache/{color_name}/{asset_index}.png
    position:
      top: 104
      left: 49
  beard_layer:
    max_asset_index: 2
    color_palette_name: hair_color_palette
    variant_source: head_shape_layer
    asset_url: <BASE_URL>/manga_male_pack/assets/beard_style/{color_name}/{variant}/{asset_index}.png
    position:
      top: 75
      left: 30

  # Cloths
  shirt_layer:
    max_asset_index: 25
    color_palette_name: cloth_color_palette
    asset_url: <BASE_URL>/manga_male_pack/assets/shirt/{color_name}/{asset_index}.png
    position:
      top: 124
      left: 26
  jackets_layer:
    max_asset_index: 19
    color_palette_name: cloth_color_palette
    asset_url: <BASE_URL>/manga_male_pack/assets/jacket/{color_name}/{asset_index}.png
    position:
      top: 122
      left: 24
  scarf_layer:
    max_asset_index: 2
    color_palette_name: cloth_color_palette
    asset_url: <BASE_URL>/manga_male_pack/assets/scarf/{color_name}/{asset_index}.png
    position:
      top: 126
      left: 30
  glasses_layer:
    max_asset_index: 34
    asset_url: <BASE_URL>/manga_male_pack/assets/glasses/{asset_index}.png
    position:
      top: 57
      left: 27

  # Backgrounds
  filled_background_layer:
    max_asset_index: 24
    asset_url: <BASE_URL>/manga_male_pack/assets/bg_color/{asset_index}.png
  pattern_layer:
    max_asset_index: 32
    color_palette_name: cloth_color_palette
    asset_url: <BASE_URL>/manga_male_pack/assets/bg_pattern/{color_name}/{asset_index}.png
  theme_layer:
    max_asset_index: 18
    asset_url: <BASE_URL>/manga_male_pack/assets/bg_theme/{asset_index}.png

  # Effects
  weather_effect_layer:
    max_asset_index: 1
    asset_url: <BASE_URL>/manga_male_pack/assets/weather_effect/{asset_index}.png


layers_priority:
  - filled_background_layer
  - pattern_layer
  - theme_layer
  - hair_back_layer
  - body_shape_layer
  - shirt_layer
  - jackets_layer
  - scarf_layer
  - right_ear_layer
  - left_ear_layer
  - head_shape_layer
  - beard_layer
  - mouth_layer
  - mustache_layer
  - nose_layer
  - left_eyeshadow_layer
  - right_eyeshadow_layer
  - left_eye_layer
  - right_eye_layer
  - left_eyebrow_layer
  - right_eyebrow_layer
  - hair_front_layer
  - glasses_layer
  - hat_layer
  - weather_effect_layer


commands:
  # Draw hair
  draw_hair:
    preview_url: <BASE_URL>/manga_male_pack/command_previews/hair_styles/{asset_index}.gif
    subscribed_layers:
      - hair_front_layer
      - hair_back_layer
    rules:
      # Rule 1
      - description: no ears if the hairstyle is ear-covering
        on_asset_index:
          in: *ear_covering_hair
        transform:
          # Make the ears invisible
          - layer_name: left_ear_layer
            to_asset_index: 0
          - layer_name: right_ear_layer
            to_asset_index: 0

  # Draw hat
  draw_hat:
    movement_limit: 3
    preview_url: <BASE_URL>/manga_male_pack/command_previews/hats/{asset_index}.gif
    subscribed_layers:
      - hat_layer
    rules:
      # Rule 1
      - description: no hair, no ears when the hat fully covers the head
        on_asset_index:
          in: *full_coverage_hats
        transform:
            # Make the ears invisible
          - layer_name: left_ear_layer
            to_asset_index: 0
          - layer_name: right_ear_layer
            to_asset_index: 0
            # Make the hair invisible
          - layer_name: hair_front_layer
            to_asset_index: 0
          - layer_name: hair_back_layer
            to_asset_index: 0
      # Rule 2
      - description: any head-sized hat should correctly cover the hair
        on_asset_index:
          in: *head_sized_hats
        transform:
          - layer_name: hair_front_layer
            to_asset_index: *compact_hair
            if_asset_index:
              not_in: *shaved_sides_hairs
          - layer_name: hair_back_layer
            to_asset_index: 0
            if_asset_index:
              not_in: *standalone_pretty_back_hairs
              # in: [4, 5, 6, 7, 8, 12, 13, 14, 15, 16, 20, 24, 25, 29, 31, 44, 56, 57, 60]
      # Rule 3
      - description: ensure any remaining hat correctly covers the hair
        on_asset_index:
          not_in: *all_non_regular_hats
        transform:
          # Transform hair to horseshoe hair, if it's not shaved sides hair
          - layer_name: hair_front_layer
            to_asset_index: *compact_hair
            if_asset_index:
              not_in: *shaved_sides_hairs
          - layer_name: hair_back_layer
            to_asset_index: 0
            if_asset_index:
              not_in: *standalone_pretty_back_hairs

  # Draw body_shape
  draw_body_shape:
    permanent: true
    preview_url: ''
    subscribed_layers:
      - body_shape_layer
  # Draw head_shape
  draw_head_shape:
    permanent: true
    preview_url: <BASE_URL>/manga_male_pack/command_previews/head_shapes/{asset_index}.gif
    protected: true
    subscribed_layers:
      - head_shape_layer
  # Draw ears
  draw_ears:
    permanent: true
    preview_url: <BASE_URL>/manga_male_pack/command_previews/ears/{asset_index}.gif
    subscribed_layers:
      - left_ear_layer
      - right_ear_layer
  # Draw eyebrows
  draw_eyebrows:
    permanent: true
    preview_url: <BASE_URL>/manga_male_pack/command_previews/eyebrows/{asset_index}.gif
    movement_limit: 2
    subscribed_layers:
      - left_eyebrow_layer
      - right_eyebrow_layer
      - left_eyeshadow_layer
      - right_eyeshadow_layer
  # Draw eyes
  draw_eyes:
    permanent: true
    preview_url: <BASE_URL>/manga_male_pack/command_previews/eyes/{asset_index}.gif
    subscribed_layers:
      - left_eye_layer
      - right_eye_layer
  # Draw nose
  draw_nose:
    permanent: true
    preview_url: <BASE_URL>/manga_male_pack/command_previews/nose_shapes/{asset_index}.gif
    movement_limit: 2
    subscribed_layers:
      - nose_layer
  # Draw mouth
  draw_mouth:
    permanent: true
    preview_url: <BASE_URL>/manga_male_pack/command_previews/mouth_shapes/{asset_index}.gif
    movement_limit: 2
    subscribed_layers:
      - mouth_layer
  # Draw mustache
  draw_mustache:
    preview_url: <BASE_URL>/manga_male_pack/command_previews/mustache_styles/{asset_index}.gif
    movement_limit: 2
    subscribed_layers:
      - mustache_layer
  # Draw beard
  draw_beard:
    preview_url: <BASE_URL>/manga_male_pack/command_previews/beard_styles/{asset_index}.gif
    subscribed_layers:
      - beard_layer
  # Draw shirt
  draw_shirt:
    permanent: true
    preview_url: <BASE_URL>/manga_male_pack/command_previews/shirts/{asset_index}.gif
    subscribed_layers:
      - shirt_layer
  # Draw jacket
  draw_jacket:
    preview_url: <BASE_URL>/manga_male_pack/command_previews/jackets/{asset_index}.gif
    subscribed_layers:
      - jackets_layer
  # Draw scarf
  draw_scarf:
    preview_url: <BASE_URL>/manga_male_pack/command_previews/scarfs/{asset_index}.gif
    subscribed_layers:
      - scarf_layer
  # Draw glasses
  draw_glasses:
    preview_url: <BASE_URL>/manga_male_pack/command_previews/glasses/{asset_index}.gif
    movement_limit: 2
    subscribed_layers:
      - glasses_layer
  # Draw filled_background
  draw_filled_background:
    permanent: true
    preview_url: <BASE_URL>/manga_male_pack/command_previews/bg_colors/{asset_index}.gif
    subscribed_layers:
      - filled_background_layer
  # Draw patterns
  draw_patterns:
    preview_url: <BASE_URL>/manga_male_pack/command_previews/bg_patterns/{asset_index}.gif
    subscribed_layers:
      - pattern_layer
  # Draw themes
  draw_themes:
    preview_url: <BASE_URL>/manga_male_pack/command_previews/bg_themes/{asset_index}.gif
    subscribed_layers:
      - theme_layer
  # Draw weather_effect
  draw_weather_effect:
    preview_url: <BASE_URL>/manga_male_pack/command_previews/weather_effects/{asset_index}.gif
    subscribed_layers:
      - weather_effect_layer


color_palettes:
  # Skin colors
  skin_color_palette:
    colors:
      - color_name: light
        color_code: '#f9d5c3'
      - color_name: plain
        color_code: '#fabe9f'
      - color_name: dark
        color_code: '#e0a182'
  # Hair colors
  hair_color_palette:
    colors:
      - color_name: black
        color_code: '#262624'
      - color_name: brown
        color_code: '#a87c4f'
      - color_name: red
        color_code: '#ac3831'
      - color_name: blond
        color_code: '#fabe48'
  # Eye colors
  eye_color_palette:
    colors:
      - color_name: black
        color_code: '#262624'
      - color_name: brown
        color_code: '#a35d02'
      - color_name: hazel
        color_code: '#d1c50b'
      - color_name: green
        color_code: '#0dc438'
      - color_name: blue
        color_code: '#1c71f1'
      - color_name: gray
        color_code: '#a5caf3'
  # Cloth colors
  cloth_color_palette:
    colors:
      - color_name: white
        color_code: '#f5f4e8'
      - color_name: black
        color_code: '#262624'
      - color_name: brown
        color_code: '#5b3b26'
      - color_name: yellow
        color_code: '#dfa915'
      - color_name: blue
        color_code: '#2f7faf'
      - color_name: violet
        color_code: '#6854a2'
      - color_name: red
        color_code: '#a91a26'
      - color_name: green
        color_code: '#136f36'


scripts:
  initializer_script:
    description: Draw the default avatar.
    actions:
      # Draw body shape
      - command_name: draw_body_shape
        asset_index: 1
      # Draw head shape
      - command_name: draw_head_shape
        asset_index: 1
        color_name: plain
      # Draw ears
      - command_name: draw_ears
        asset_index: 1
      # Draw nose
      - command_name: draw_nose
        asset_index: 1
      # Draw mouth
      - command_name: draw_mouth
        asset_index: 1
      # Draw eyebrows
      - command_name: draw_eyebrows
        asset_index: 1
        color_name: black
      # Draw eyes
      - command_name: draw_eyes
        asset_index: 1
        color_name: black
      # Draw shirt
      - command_name: draw_shirt
        asset_index: 5
        color_name: white
      # Draw background
      - command_name: draw_filled_background
        asset_index: 3
